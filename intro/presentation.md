# Дипломная работа "Кино вместе"

## Предлагаемая идея проекта из задания
> Выполните проект «Кино вместе»: кнопка, проверяющая список «Хочу посмотреть» 
у друзей пользователя и выводящая совпадения. 
После чего начинается сеанс совместного просмотра с чатом. 
Также есть общий механизм управления (_пауза, перемотка_) контентом у всех.
![img.png](img.png)

## Реализованная схема
Предполагается, что создание списка друзей выходит за рамки данной работы, 
поскольку объем работы сопоставим или даже выше "остальной" части проекта.  
Таким образом, схематическая описание проекта следующее:  
- зарегистрированный пользователь (интегрируем **сервис аутентификации**) онлайн-кинотеатра создает общую комнату 
для просмотра фильма и получает html-ссылку на созданную комнату. 
  - Вся информация о созданной комнате, и о к ней подключенных/отключенных 
  пользователях сохраняется в **postgres**.
- с учетом замечания выше, предполагается, что владельцу комнаты делается подборка тех пользователей
среди друзей, которые пометили данный фильм тегом "Хочу посмотреть"
- рассылка приглашений к совместному просмотру производится путем подключения 
**сервиса нотификации** с реализованной схемой уведомления по электронной почте. 
Это однако, не мешает создателю комнаты просмотра отправить ссылку кому-то персонально.
Например, через соцсети.
В настоящее время не реализована проверка подключения к общей комнате только лицам, 
которые присутствуют в уведомлении. 
Такая схема делает возможным передачу ссылки от друга к другу.
Но у данного подхода есть свои плюсы с точки зрения продуктового разработчика:
  - это и потенциальное увеличения круга друзей
  - и возможная регистрация нового пользователя-клиента, воспользовавшегося ссылкой
  
- запуск фильма предполагается начать сразу после рассылки уведомлений-приглашений.
Однако, никто не мешает владельцу комнаты приостановить фильм, нажав на паузу
и дождаться кого-нибудь для начала совместного просмотра.
- для реализации совместного управления плейером и для невербального чата в проекте
применена **технология вебсокетов**.
- В целях восстановления информации по **_не закрытой_** комнате, вся информация о ней
  (текущий тайминг, работает плейер или на паузе, текущий состав участников, 
текстовка чата) сохраняется в **Redis**.
  
## Запуск проекта
1. docker-compose up -d db
2. psql -h localhost -p 5432 -U postgres pwd: postgres
3. create database movie_together;
4. \q
5. alembic upgrade head